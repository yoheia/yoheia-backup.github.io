## タイトル
SQLを速くするたった3つの原則　～SQLチューニングは職人技ではなかった～

## 概要
- 職人芸と言われるSQLチューニングを体系的に整理し、初心者が最短で中上級者になるための高速道路を作りたいという想いでこの本を書きました。
- 絵でを直感的にイメージをつかみ、具体例で実践方法を習得し、演習問題で理解度を確認し、現場ではチートシートですぐに確認できる構成になっています。
- Oracle Database のSQLチューニングについて書いていますが、考え方は他のRDBMS(だけでなくRDBMS以外のソフトウェア)でも通用します。

## 対象読者
- 初めてSQLチューニングを学ばれる方や初級者
- 経験で身に付けたSQLチューニングを理論的に整理されたい中上級者
- 現場でSQL チューニングを担当しているが、教えてもらえる人もなく、自力でどうにかしないといけない方

## 目次案
- 本書を俯瞰図
	- あなたがSQLチューニングをマスターするまでの道のり
- SQLを速くするたった3つの原則
	- 数時間かかるSQLがチューニングで1秒未満になるカラクリ
	- 速くする方法は3つしかない
		- 仕事量を減らす
		- 並列化する
		- 高速化する
	- 仕事量を減らせば速くなる
		- データ構造重要
		- フルスキャンは悪ではないが注意すべき理由
		- フルスキャンは足算、結合は掛け算
- SQLチューニングの流れはシンプル
	- 推測するな計測せよ
	- ボトルネックを見つける
	- ボトルネックを取り除く
- お前はすでにチューニングされている
	- 統計情報を収集するだけ
	- SQLを少し書換えるだけ
- SQLチューニングの奥義(実践編)
	- 仕事量を減らす
		- 行方向
			- インデックス
				- BTree
				- Bitmap
				- ファンクション
			- パーティショニング
				- レンジ
				- リスト
				- ハッシュ
				- コンポジット

			- 結合
				- 結合順
				- 結合方法
		- 列方向
			- カバリングインデックス（インデックスオンリースキャン）
			- 圧縮
	- 並列化する
		- パラレルクエリー・DML
		- Right growing Index
		- シーケンス
	- 高速化する
		- 速い所にデータを置く(SSD、キャッシュ)
		- 同じ事を繰り返さない(再利用)
			- コネクションプーリングで接続を
			- バインド変数でハードパースを省略
			- セッションカーソル共有でソフトパースを省略
			- フェッチするサイズを大きくしてラウンドトップ回数を減らす
			- バルク処理でまとめる
- 大人の事情なチューニング
	- SQLを書換える
	- ヒントで実行計画を制御する
- チューニング結果を評価する
	- 実行時間と仕事量で評価する
	- データ量増加時の性能劣化を考慮する
- 演習問題(20問)

### コラム
- RDBMSとクエリーオプティマイザの歴史(実は珍しいルールベース)
- Oracle Database が流行った理由(マルチプロセス、ルールベース、MVCC、RAC)
- レスポンスとスループット
- プロセスの状態遷移が分かると待機イベントが分かる
- 実行計画のオペレーションは関数名と一致する
- sort するとなぜ consistent gets が減るか
- V$SQL_HINT で使えるヒントを調べる
- Exadata は魔法のように速い理由

### チートシート
- 実行計画の取得方法
- 実行計画の読み方
- 実行計画の種類
- 統計情報の種類と収集方法
- ヒント句


### 参考書籍

### ケーススタディ
- <http://app.m-cocolog.jp/t/typecast/121907/106341/68994334>
	- パーティション選択ミス
	- ファンクション索引